<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vapi AI Live Voice</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body { font-family: Arial, sans-serif; padding: 40px; }
    #vapiMic {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 70px;
      height: 70px;
      border: none;
      border-radius: 50%;
      background: #4CAF50;
      color: white;
      font-size: 32px;
      cursor: pointer;
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
      z-index: 9999;
      transition: background 0.3s;
    }
    #vapiMic.active {
      background: #2E7D32;
      animation: pulse 1.2s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(46,125,50,0.6); }
      70% { box-shadow: 0 0 0 20px rgba(46,125,50,0); }
      100% { box-shadow: 0 0 0 0 rgba(46,125,50,0); }
    }
    #voiceStatus {
      position: fixed;
      bottom: 100px;
      right: 20px;
      background: #111;
      color: white;
      padding: 6px 12px;
      border-radius: 14px;
      font-size: 14px;
      opacity: 0.85;
    }
  </style>

  <!-- Vapi Widget Script -->
  <script>
    var vapiInstance = null;
    const assistant = "42aa8590-d562-4a7c-a4d4-e593b58910f2"; // Your Assistant ID
    const apiKey = "c7c09835-c129-43c9-9af1-279a9ef03afc";    // Your Public Key
    const buttonConfig = {}; // Optional additional config

    (function (d, t) {
      var g = document.createElement(t),
          s = d.getElementsByTagName(t)[0];
      g.src =
        "https://cdn.jsdelivr.net/gh/VapiAI/html-script-tag@latest/dist/assets/index.js";
      g.defer = true;
      g.async = true;
      s.parentNode.insertBefore(g, s);

      g.onload = function () {
        vapiInstance = window.vapiSDK.run({
          apiKey: apiKey,
          assistant: assistant,
          config: buttonConfig
        });
      };
    })(document, "script");
  </script>
</head>

<body>
  <h1>Vapi AI Live Voice</h1>
  <p>Click the microphone to speak directly with the AI assistant.</p>

  <!-- Floating Mic Button -->
  <button id="vapiMic">ðŸŽ¤</button>
  <div id="voiceStatus">Idle</div>

  <script>
    const micBtn = document.getElementById("vapiMic");
    const voiceStatus = document.getElementById("voiceStatus");
    let isActive = false;

    micBtn.addEventListener("click", () => {
      if (!vapiInstance) {
        console.error("Vapi SDK not loaded yet");
        return;
      }

      if (!isActive) {
        vapiInstance.start(); // Start live voice session
        micBtn.classList.add("active");
        voiceStatus.textContent = "Listeningâ€¦";
        isActive = true;
      } else {
        vapiInstance.stop(); // Stop voice session
        micBtn.classList.remove("active");
        voiceStatus.textContent = "Idle";
        isActive = false;
      }
    });
  </script>
</body>
</html>
